import{k as ye,n as Ce,l as E,t as g,u as K,r as h,T as J,q as be,s as oe,v as Ie,x as X,y as we,z as j,A as ke,i as z,d as A,D as H,a as u,E as ae,G as Y,H as le,I as U,J as Z,K as q,j as $,m as R,L as F,M as pe,N as W,O as Oe,P as ge,Q as Pe,R as se,F as ce,S as V,U as re,V as ie,W as Se,X as xe,Y as ue,Z as Te,$ as _e,a0 as Re,a1 as de,a2 as Ee,a3 as ze,a4 as Ae,a5 as $e,a6 as De,C as Be,a7 as fe,a8 as Q,a9 as Le}from"./index-7JSl73M1.js";function Ve(e,{args:t=[],done:n,canceled:r,error:a}){if(e){const s=e.apply(null,t);ye(s)?s.then(c=>{c?n():r&&r()}).catch(a||Ce):s?n():r&&r()}else n()}const Ne=Symbol();let Me=2e3;const Fe=()=>++Me,Ke={show:Boolean,zIndex:E,overlay:g,duration:E,teleport:[String,Object],lockScroll:g,lazyRender:g,beforeClose:Function,overlayStyle:Object,overlayClass:K,transitionAppear:Boolean,closeOnClickOverlay:g};function Ye(e,t){return e>t?"horizontal":t>e?"vertical":""}function We(){const e=h(0),t=h(0),n=h(0),r=h(0),a=h(0),s=h(0),c=h(""),d=h(!0),I=()=>c.value==="vertical",w=()=>c.value==="horizontal",v=()=>{n.value=0,r.value=0,a.value=0,s.value=0,c.value="",d.value=!0};return{move:m=>{const b=m.touches[0];n.value=(b.clientX<0?0:b.clientX)-e.value,r.value=b.clientY-t.value,a.value=Math.abs(n.value),s.value=Math.abs(r.value);const O=10;(!c.value||a.value<O&&s.value<O)&&(c.value=Ye(a.value,s.value)),d.value&&(a.value>J||s.value>J)&&(d.value=!1)},start:m=>{v(),e.value=m.touches[0].clientX,t.value=m.touches[0].clientY},reset:v,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:a,offsetY:s,direction:c,isVertical:I,isHorizontal:w,isTap:d}}let B=0;const ee="van-overflow-hidden";function Ge(e,t){const n=We(),r="01",a="10",s=v=>{n.move(v);const p=n.deltaY.value>0?a:r,P=we(v.target,e.value),{scrollHeight:m,offsetHeight:b,scrollTop:O}=P;let k="11";O===0?k=b>=m?"00":"01":O+b>=m&&(k="10"),k!=="11"&&n.isVertical()&&!(parseInt(k,2)&parseInt(p,2))&&j(v,!0)},c=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",s,{passive:!1}),B||document.body.classList.add(ee),B++},d=()=>{B&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",s),B--,B||document.body.classList.remove(ee))},I=()=>t()&&c(),w=()=>t()&&d();be(I),oe(w),Ie(w),X(t,v=>{v?c():d()})}function ve(e){const t=h(!1);return X(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const G=()=>{var e;const{scopeId:t}=((e=ke())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[Xe,je]=z("overlay"),He={show:Boolean,zIndex:E,duration:E,className:K,lockScroll:g,lazyRender:g,customStyle:Object};var Ue=A({name:Xe,props:He,setup(e,{slots:t}){const n=h(),r=ve(()=>e.show||!e.lazyRender),a=c=>{e.lockScroll&&j(c,!0)},s=r(()=>{var c;const d=Y(le(e.zIndex),e.customStyle);return U(e.duration)&&(d.animationDuration=`${e.duration}s`),Z(u("div",{ref:n,style:d,class:[je(),e.className]},[(c=t.default)==null?void 0:c.call(t)]),[[q,e.show]])});return H("touchmove",a,{target:n}),()=>u(ae,{name:"van-fade",appear:!0},{default:s})}});const Ze=$(Ue),qe=Y({},Ke,{round:Boolean,position:R("center"),closeIcon:R("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:R("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Je,te]=z("popup");var Qe=A({name:Je,inheritAttrs:!1,props:qe,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:r}){let a,s;const c=h(),d=h(),I=ve(()=>e.show||!e.lazyRender),w=F(()=>{const i={zIndex:c.value};if(U(e.duration)){const C=e.position==="center"?"animationDuration":"transitionDuration";i[C]=`${e.duration}s`}return i}),v=()=>{a||(a=!0,c.value=e.zIndex!==void 0?+e.zIndex:Fe(),t("open"))},p=()=>{a&&Ve(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},P=i=>{t("clickOverlay",i),e.closeOnClickOverlay&&p()},m=()=>{if(e.overlay)return u(Ze,V({show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},G(),{onClick:P}),{default:r["overlay-content"]})},b=i=>{t("clickCloseIcon",i),p()},O=()=>{if(e.closeable)return u(ie,{role:"button",tabindex:0,name:e.closeIcon,class:[te("close-icon",e.closeIconPosition),re],classPrefix:e.iconPrefix,onClick:b},null)};let k;const S=()=>{k&&clearTimeout(k),k=setTimeout(()=>{t("opened")})},l=()=>t("closed"),f=i=>t("keydown",i),y=I(()=>{var i;const{round:C,position:_,safeAreaInsetTop:x,safeAreaInsetBottom:D}=e;return Z(u("div",V({ref:d,style:w.value,role:"dialog",tabindex:0,class:[te({round:C,[_]:_}),{"van-safe-area-top":x,"van-safe-area-bottom":D}],onKeydown:f},n,G()),[(i=r.default)==null?void 0:i.call(r),O()]),[[q,e.show]])}),o=()=>{const{position:i,transition:C,transitionAppear:_}=e,x=i==="center"?"van-fade":`van-popup-slide-${i}`;return u(ae,{name:C||x,appear:_,onAfterEnter:S,onAfterLeave:l},{default:y})};return X(()=>e.show,i=>{i&&!a&&(v(),n.tabindex===0&&pe(()=>{var C;(C=d.value)==null||C.focus()})),!i&&a&&(a=!1,t("close"))}),W({popupRef:d}),Ge(d,()=>e.show&&e.lockScroll),H("popstate",()=>{e.closeOnPopstate&&(p(),s=!1)}),Oe(()=>{e.show&&v()}),ge(()=>{s&&(t("update:show",!0),s=!1)}),oe(()=>{e.show&&e.teleport&&(p(),s=!0)}),Pe(Ne,()=>e.show),()=>e.teleport?u(se,{to:e.teleport},{default:()=>[m(),o()]}):u(ce,null,[m(),o()])}});const et=$(Qe),[tt,ne]=z("cell-group"),nt={title:String,inset:Boolean,border:g};var ot=A({name:tt,inheritAttrs:!1,props:nt,setup(e,{slots:t,attrs:n}){const r=()=>{var s;return u("div",V({class:[ne({inset:e.inset}),{[Se]:e.border&&!e.inset}]},n,G()),[(s=t.default)==null?void 0:s.call(t)])},a=()=>u("div",{class:ne("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?u(ce,null,[a(),r()]):r()}});const ht=$(ot),[he,N]=z("dropdown-menu"),at={overlay:g,zIndex:E,duration:xe(.2),direction:R("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:g,closeOnClickOverlay:g,swipeThreshold:E},me=Symbol(he);var lt=A({name:he,props:at,setup(e,{slots:t}){const n=ue(),r=h(),a=h(),s=h(0),{children:c,linkChildren:d}=Te(me),I=_e(r),w=F(()=>c.some(l=>l.state.showWrapper)),v=F(()=>e.swipeThreshold&&c.length>+e.swipeThreshold),p=F(()=>{if(w.value&&U(e.zIndex))return{zIndex:+e.zIndex+1}}),P=()=>{c.forEach(l=>{l.toggle(!1)})},m=()=>{e.closeOnClickOutside&&P()},b=()=>{if(a.value){const l=de(a);e.direction==="down"?s.value=l.bottom:s.value=Ee.value-l.top}},O=()=>{w.value&&b()},k=l=>{c.forEach((f,y)=>{y===l?f.toggle():f.state.showPopup&&f.toggle(!1,{immediate:!0})})},S=(l,f)=>{const{showPopup:y}=l.state,{disabled:o,titleClass:i}=l;return u("div",{id:`${n}-${f}`,role:"button",tabindex:o?void 0:0,class:[N("item",{disabled:o,grow:v.value}),{[re]:!o}],onClick:()=>{o||k(f)}},[u("span",{class:[N("title",{down:y===(e.direction==="down"),active:y}),i],style:{color:y?e.activeColor:""}},[u("div",{class:"van-ellipsis"},[l.renderTitle()])])])};return W({close:P}),d({id:n,props:e,offset:s,updateOffset:b}),Re(r,m),H("scroll",O,{target:I,passive:!0}),()=>{var l;return u("div",{ref:r,class:N()},[u("div",{ref:a,style:p.value,class:N("bar",{opened:w.value,scrollable:v.value})},[c.map(S)]),(l=t.default)==null?void 0:l.call(t)])}}});const[st,M]=z("dropdown-item"),ct={title:String,options:$e(),disabled:Boolean,teleport:[String,Object],lazyRender:g,modelValue:K,titleClass:K};var rt=A({name:st,inheritAttrs:!1,props:ct,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:t,slots:n,attrs:r}){const a=ze({showPopup:!1,transition:!0,showWrapper:!1}),s=h(),{parent:c,index:d}=Ae(me);if(!c)return;const I=l=>()=>t(l),w=I("open"),v=I("close"),p=I("opened"),P=()=>{a.showWrapper=!1,t("closed")},m=l=>{e.teleport&&l.stopPropagation()},b=(l=!a.showPopup,f={})=>{l!==a.showPopup&&(a.showPopup=l,a.transition=!f.immediate,l&&(c.updateOffset(),a.showWrapper=!0))},O=()=>{if(n.title)return n.title();if(e.title)return e.title;const l=e.options.find(f=>f.value===e.modelValue);return l?l.text:""},k=l=>{const{activeColor:f}=c.props,{disabled:y}=l,o=l.value===e.modelValue,i=()=>{y||(a.showPopup=!1,l.value!==e.modelValue&&(t("update:modelValue",l.value),t("change",l.value)))},C=()=>{if(o)return u(ie,{class:M("icon"),color:y?void 0:f,name:"success"},null)};return u(Be,{role:"menuitem",key:String(l.value),icon:l.icon,title:l.text,class:M("option",{active:o,disabled:y}),style:{color:o?f:""},tabindex:o?0:-1,clickable:!y,onClick:i},{value:C})},S=()=>{const{offset:l}=c,{autoLocate:f,zIndex:y,overlay:o,duration:i,direction:C,closeOnClickOverlay:_}=c.props,x=le(y);let D=l.value;if(f&&s.value){const T=De(s.value);T&&(D-=de(T).top)}return C==="down"?x.top=`${D}px`:x.bottom=`${D}px`,Z(u("div",V({ref:s,style:x,class:M([C]),onClick:m},r),[u(et,{show:a.showPopup,"onUpdate:show":T=>a.showPopup=T,role:"menu",class:M("content"),overlay:o,position:C==="down"?"top":"bottom",duration:a.transition?i:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${c.id}-${d.value}`,closeOnClickOverlay:_,onOpen:w,onClose:v,onOpened:p,onClosed:P},{default:()=>{var T;return[e.options.map(k),(T=n.default)==null?void 0:T.call(n)]}})]),[[q,a.showWrapper]])};return W({state:a,toggle:b,renderTitle:O}),()=>e.teleport?u(se,{to:e.teleport},{default:()=>[S()]}):S()}});const mt=$(rt),yt=$(lt),[it,L,ut]=z("search"),dt=Y({},fe,{label:String,shape:R("square"),leftIcon:R("search"),clearable:g,actionText:String,background:String,showAction:Boolean});var ft=A({name:it,props:dt,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:n,attrs:r}){const a=ue(),s=h(),c=()=>{n.action||(t("update:modelValue",""),t("cancel"))},d=o=>{o.keyCode===13&&(j(o),t("search",e.modelValue))},I=()=>e.id||`${a}-input`,w=()=>{if(n.label||e.label)return u("label",{class:L("label"),for:I()},[n.label?n.label():e.label])},v=()=>{if(e.showAction){const o=e.actionText||ut("cancel");return u("div",{class:L("action"),role:"button",tabindex:0,onClick:c},[n.action?n.action():o])}},p=()=>{var o;return(o=s.value)==null?void 0:o.blur()},P=()=>{var o;return(o=s.value)==null?void 0:o.focus()},m=o=>t("blur",o),b=o=>t("focus",o),O=o=>t("clear",o),k=o=>t("clickInput",o),S=o=>t("clickLeftIcon",o),l=o=>t("clickRightIcon",o),f=Object.keys(fe),y=()=>{const o=Y({},r,Q(e,f),{id:I()}),i=C=>t("update:modelValue",C);return u(Le,V({ref:s,type:"search",class:L("field",{"with-message":o.errorMessage}),border:!1,onBlur:m,onFocus:b,onClear:O,onKeypress:d,onClickInput:k,onClickLeftIcon:S,onClickRightIcon:l,"onUpdate:modelValue":i},o),Q(n,["left-icon","right-icon"]))};return W({focus:P,blur:p}),()=>{var o;return u("div",{class:L({"show-action":e.showAction}),style:{background:e.background}},[(o=n.left)==null?void 0:o.call(n),u("div",{class:L("content",e.shape)},[w(),y()]),v()])}}});const Ct=$(ft);export{ht as C,yt as D,Ct as S,mt as a};
